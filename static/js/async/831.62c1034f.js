"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([["831"],{1619:function(e,r,n){n.r(r),n.d(r,{default:function(){return c}});var s=n(1549),t=n(6603),i=n(7997);function a(e){let r=Object.assign({h1:"h1",a:"a",p:"p",div:"div",h2:"h2",pre:"pre",code:"code",strong:"strong",blockquote:"blockquote",ul:"ul",li:"li"},(0,t.ah)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(r.h1,{id:"快速开始",children:["快速开始",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#快速开始",children:"#"})]}),"\n",(0,s.jsx)(r.p,{children:"这是一个与框架无关的例子，采用原生的 HTML 来开发项目"}),"\n",(0,s.jsxs)(r.div,{className:"rspress-directive tip",children:[(0,s.jsx)(r.div,{className:"rspress-directive-title",children:"TIP"}),(0,s.jsx)(r.div,{className:"rspress-directive-content",children:(0,s.jsxs)(r.p,{children:["Gez 默认支持 SSR，但是你可以当成 ",(0,s.jsx)(r.a,{href:"/guide/essentials/csr",children:"CSR"})," 来使用。\n"]})})]}),"\n",(0,s.jsxs)(r.h2,{id:"创建项目",children:["创建项目",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#创建项目",children:"#"})]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"cd 项目目录\nnpm init\n"})}),"\n",(0,s.jsxs)(r.h2,{id:"设置-esm",children:["设置 ESM",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#设置-esm",children:"#"})]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",meta:'title="package.json"',children:'{\n    "type": "module",\n}\n'})}),"\n",(0,s.jsxs)(r.h2,{id:"安装依赖",children:["安装依赖",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#安装依赖",children:"#"})]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"安装生产依赖"})}),"\n",(0,s.jsx)(i.PackageManagerTabs,{command:"install @gez/core"}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"安装开发依赖"})}),"\n",(0,s.jsx)(i.PackageManagerTabs,{command:"install @gez/rspack typescript @types/node -D"}),"\n",(0,s.jsxs)(r.div,{className:"rspress-directive tip",children:[(0,s.jsx)(r.div,{className:"rspress-directive-title",children:"TIP"}),(0,s.jsx)(r.div,{className:"rspress-directive-content",children:(0,s.jsxs)(r.p,{children:["总是应该将生产依赖和开发依赖区分，会使 ",(0,s.jsx)(r.code,{children:"node_modules"})," 在生产环境中更小。\n"]})})]}),"\n",(0,s.jsxs)(r.h2,{id:"添加脚本",children:["添加脚本",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#添加脚本",children:"#"})]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",meta:'title="package.json"',children:'{\n    "scripts": {\n        "dev": "gez dev",\n        "build": "npm run build:dts && npm run build:ssr",\n        "build:ssr": "gez build",\n        "preview": "gez preview",\n        "start": "gez start",\n        "build:dts": "tsc --declaration --emitDeclarationOnly --outDir dist/src"\n    },\n}\n'})}),"\n",(0,s.jsxs)(r.div,{className:"rspress-directive tip",children:[(0,s.jsx)(r.div,{className:"rspress-directive-title",children:"TIP"}),(0,s.jsx)(r.div,{className:"rspress-directive-content",children:(0,s.jsxs)(r.p,{children:["你需要手动配置 ",(0,s.jsx)(r.a,{href:"https://www.typescriptlang.org/tsconfig/",target:"_blank",rel:"noopener noreferrer",children:"tsconfig.json"})," 文件，否则执行 ",(0,s.jsx)(r.code,{children:"build:dts"})," 命令会报错。\n"]})})]}),"\n",(0,s.jsxs)(r.h2,{id:"目录结构",children:["目录结构",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#目录结构",children:"#"})]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{children:"- src/\n  - entry.client.ts  # 客户端渲染入口。\n  - entry.server.ts  # 服务端渲染入口。\n  - entry.node.ts    # 创建服务器。\n- tsconfig.json      # TS 的配置。\n- package.json       # 软件包配置。\n"})}),"\n",(0,s.jsxs)(r.h2,{id:"tsconfigjson",children:["tsconfig.json",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#tsconfigjson",children:"#"})]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'{\n    "compilerOptions": {\n        "isolatedModules": true,\n        "experimentalDecorators": true,\n        "resolveJsonModule": true,\n        "types": [\n            "@types/node"\n        ],\n        "target": "ESNext",\n        "module": "ESNext",\n        "moduleResolution": "node",\n        "strict": true,\n        "skipLibCheck": true,\n        "allowSyntheticDefaultImports": true,\n        "paths": {\n            "ssr-html/src/*": [\n                "./src/*"\n            ],\n            "ssr-html/*": [\n                "./*"\n            ]\n        }\n    },\n    "include": [\n        "src"\n    ],\n    "exclude": [\n        "dist"\n    ]\n  }\n'})}),"\n",(0,s.jsxs)(r.div,{className:"rspress-directive warning",children:[(0,s.jsx)(r.div,{className:"rspress-directive-title",children:"WARNING"}),(0,s.jsx)(r.div,{className:"rspress-directive-content",children:(0,s.jsxs)(r.p,{children:["你需要将上面的 ",(0,s.jsx)(r.code,{children:"ssr-html"}),"，替换成 ",(0,s.jsx)(r.code,{children:"package.json"})," 的 ",(0,s.jsx)(r.code,{children:"name"})," 字段的值。\n"]})})]}),"\n",(0,s.jsxs)(r.h2,{id:"创建服务器",children:["创建服务器",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#创建服务器",children:"#"})]}),"\n",(0,s.jsx)(r.p,{children:"创建一个 web 服务器，来处理客户请求"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-ts",meta:'title="src/entry.node.ts"',children:"import http from 'node:http';\nimport type { GezOptions } from '@gez/core';\n\nexport default {\n    // 本地执行 dev 和 build 时会使用\n    async createDevApp(gez) {\n        return import('@gez/rspack').then((m) =>\n            m.createRspackHtmlApp(gez, {\n                config(context) {\n                    // 可以在这里修改 Rspack 编译的配置\n                }\n            })\n        );\n    },\n    async createServer(gez) {\n        const server = http.createServer((req, res) => {\n            // 静态文件处理\n            gez.middleware(req, res, async () => {\n                // 传入渲染的参数\n                const rc = await gez.render({\n                    params: {\n                        url: req.url\n                    }\n                });\n                // 响应 HTML 内容\n                res.end(rc.html);\n            });\n        });\n        // 监听端口\n        server.listen(3000, () => {\n            console.log('http://localhost:3000');\n        });\n    }\n} satisfies GezOptions;\n"})}),"\n",(0,s.jsxs)(r.h2,{id:"服务端渲染",children:["服务端渲染",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#服务端渲染",children:"#"})]}),"\n",(0,s.jsx)(r.p,{children:"模拟框架的 SSR API，渲染出 HTML 内容返回"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-ts",meta:'title="src/entry.server.ts"',children:"import type { RenderContext } from '@gez/core';\n\nexport default async (rc: RenderContext) => {\n    // 提交依赖收集\n    await rc.commit();\n    // 响应 HTML\n    const time = new Date().toISOString();\n    rc.html = `\n<!DOCTYPE html>\n<html>\n<head>\n    ${rc.preload()}\n    <title>Gez</title>\n    ${rc.css()}\n</head>\n<body>\n    <h1>Gez</h1>\n    <h2>Hello world!</h2>\n    <p>URL: ${rc.params.url}</p>\n    <time>${time}</time>\n    ${rc.importmap()}\n    ${rc.moduleEntry()}\n    ${rc.modulePreload()}\n</body>\n</html>\n`;\n};\n\n"})}),"\n",(0,s.jsxs)(r.h2,{id:"客户端渲染",children:["客户端渲染",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#客户端渲染",children:"#"})]}),"\n",(0,s.jsx)(r.p,{children:"更新当前时间"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-ts",meta:'title="src/entry.client.ts"',children:"const time = document.querySelector('time');\nsetInterval(() => {\n    time?.setHTMLUnsafe(new Date().toISOString());\n}, 1000);\n\n"})}),"\n",(0,s.jsxs)(r.h2,{id:"启动项目",children:["启动项目",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#启动项目",children:"#"})]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"npm run dev\n"})}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsxs)(r.p,{children:["浏览器打开：",(0,s.jsx)(r.a,{href:"http://localhost:3000",target:"_blank",rel:"noopener noreferrer",children:"http://localhost:3000"})]}),"\n"]}),"\n",(0,s.jsxs)(r.h2,{id:"更多例子",children:["更多例子",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#更多例子",children:"#"})]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["ssr-html：",(0,s.jsx)(r.a,{href:"https://github.com/dp-os/gez/tree/master/examples/ssr-html",target:"_blank",rel:"noopener noreferrer",children:"源码"}),"、",(0,s.jsx)(r.a,{href:"https://dp-os.github.io/gez/ssr-html/",target:"_blank",rel:"noopener noreferrer",children:"预览"})]}),"\n",(0,s.jsxs)(r.li,{children:["ssr-preact-htm：",(0,s.jsx)(r.a,{href:"https://github.com/dp-os/gez/tree/master/examples/ssr-preact-htm",target:"_blank",rel:"noopener noreferrer",children:"源码"}),"、",(0,s.jsx)(r.a,{href:"https://dp-os.github.io/gez/ssr-preact-htm/",target:"_blank",rel:"noopener noreferrer",children:"预览"})]}),"\n",(0,s.jsxs)(r.li,{children:["ssr-vue2-remote：",(0,s.jsx)(r.a,{href:"https://github.com/dp-os/gez/tree/master/examples/ssr-vue2-remote",target:"_blank",rel:"noopener noreferrer",children:"源码"}),"、",(0,s.jsx)(r.a,{href:"https://dp-os.github.io/gez/ssr-vue2-remote/",target:"_blank",rel:"noopener noreferrer",children:"预览"})]}),"\n",(0,s.jsxs)(r.li,{children:["ssr-vue2-host：",(0,s.jsx)(r.a,{href:"https://github.com/dp-os/gez/tree/master/examples/ssr-vue2-host",target:"_blank",rel:"noopener noreferrer",children:"源码"}),"、",(0,s.jsx)(r.a,{href:"https://dp-os.github.io/gez/ssr-vue2-host/",target:"_blank",rel:"noopener noreferrer",children:"预览"})]}),"\n",(0,s.jsxs)(r.li,{children:["ssr-vue3：",(0,s.jsx)(r.a,{href:"https://github.com/dp-os/gez/tree/master/examples/ssr-vue3",target:"_blank",rel:"noopener noreferrer",children:"源码"}),"、",(0,s.jsx)(r.a,{href:"https://dp-os.github.io/gez/ssr-vue3/",target:"_blank",rel:"noopener noreferrer",children:"预览"})]}),"\n"]}),"\n",(0,s.jsxs)(r.div,{className:"rspress-directive tip",children:[(0,s.jsx)(r.div,{className:"rspress-directive-title",children:"TIP"}),(0,s.jsx)(r.div,{className:"rspress-directive-content",children:(0,s.jsx)(r.p,{children:"如果你使用了 Gez，欢迎提交 PR，在这里提供更多的例子。"})})]})]})}function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:r}=Object.assign({},(0,t.ah)(),e.components);return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}let c=d;d.__RSPRESS_PAGE_META={},d.__RSPRESS_PAGE_META["guide%2Fstart%2Fgetting-started.mdx"]={toc:[{text:"创建项目",id:"创建项目",depth:2},{text:"设置 ESM",id:"设置-esm",depth:2},{text:"安装依赖",id:"安装依赖",depth:2},{text:"添加脚本",id:"添加脚本",depth:2},{text:"目录结构",id:"目录结构",depth:2},{text:"tsconfig.json",id:"tsconfigjson",depth:2},{text:"创建服务器",id:"创建服务器",depth:2},{text:"服务端渲染",id:"服务端渲染",depth:2},{text:"客户端渲染",id:"客户端渲染",depth:2},{text:"启动项目",id:"启动项目",depth:2},{text:"更多例子",id:"更多例子",depth:2}],title:"快速开始",frontmatter:{}}}}]);